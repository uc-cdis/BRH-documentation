
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://brh.data-commons.org/nextflow-getting-started/">
      
      
        <link rel="prev" href="../17-workspace_faq/">
      
      
        <link rel="next" href="../nextflow-overview-containers/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Nextflow - Getting Started - Biomedical Research Hub Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="brh_platform" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-with-workflows-on-gen3" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Biomedical Research Hub Documentation" class="md-header__button md-logo" aria-label="Biomedical Research Hub Documentation" data-md-component="logo">
      
  <img src="../img/brh-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Biomedical Research Hub Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nextflow - Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="brh_platform" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="brh_platform_dark" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0 9.821 9.821 0 0 0-17.64 0Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/uc-cdis/BRH-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Biomedical Research Hub Documentation" class="md-nav__button md-logo" aria-label="Biomedical Research Hub Documentation" data-md-component="logo">
      
  <img src="../img/brh-logo.png" alt="logo">

    </a>
    Biomedical Research Hub Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/uc-cdis/BRH-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="https://brh.data-commons.org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Return to BRH Platform
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../01-home/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How to Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How to Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../04-BRH_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart - BRH Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../05-workspace_registration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workspace Page (Registration)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../06-loginoverview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Login Page
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../07-how_to_check_request_access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Check Study Access and Authorize Resources
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../08-discovery_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discovery Page
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../10-profile_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Profile Page
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Workspace User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Workspace User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../09-workspace_page/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started in Workspace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../13-workspace_accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workspace Accounts - Trial and Persistent Pay Models (STRIDES, Direct Pay)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../14-lauch_with_persistent_paymodel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launch a Workspace with a Persistent Pay Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../15-monitor_compute_usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitor Compute Usage in Persistent Pay Models
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../16-usage_exceeds_funding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    If Compute Usage Exceeds Funding
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../11-downloading_data_files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Downloading Data Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../17-workspace_faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workspace FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nextflow User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Nextflow User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Nextflow - Getting Started
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Nextflow - Getting Started
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-gen3" class="md-nav__link">
    What is Gen3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-workflows" class="md-nav__link">
    What are workflows?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-execution-in-gen3" class="md-nav__link">
    Workflow execution in Gen3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-nextflow-what-is-aws-batch" class="md-nav__link">
    What is Nextflow? What is AWS Batch?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-to-run-workflows-in-gen3" class="md-nav__link">
    Steps to run workflows in Gen3
  </a>
  
    <nav class="md-nav" aria-label="Steps to run workflows in Gen3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-access-to-the-brh-workspace-and-set-up-a-funded-account" class="md-nav__link">
    Get access to the BRH workspace and set up a funded account
  </a>
  
    <nav class="md-nav" aria-label="Get access to the BRH workspace and set up a funded account">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-request-access-to-the-brh-workspace" class="md-nav__link">
    1) Request access to the BRH workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-establish-a-workspace-account-with-a-persistent-pay-model-in-brh" class="md-nav__link">
    2) Establish a workspace account with a persistent pay model in BRH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-launch-a-workspace-with-the-persistent-paymodel" class="md-nav__link">
    3) Launch a workspace with the persistent paymodel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-orientation-to-the-the-workspace" class="md-nav__link">
    Quick orientation to the the workspace
  </a>
  
    <nav class="md-nav" aria-label="Quick orientation to the the workspace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-all-data-in-the-persistent-directory-pd" class="md-nav__link">
    Store all data in the persistent directory (/pd)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated-shutdown-for-idle-workspaces" class="md-nav__link">
    Automated shutdown for idle workspaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-vs-cpu-nextflow-workspace-images" class="md-nav__link">
    GPU vs CPU Nextflow workspace images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nextflow-overview-containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow - Containers in Gen3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nextflow-create-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow - Create Dockerfile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nextflow-request-creds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow - Request Credentials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nextflow-upload-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow - Upload Docker Image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../nextflow-tutorial-workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow - Tutorials Workflows
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../02-types_of_shared_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAIR Data
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../03-data_and_repos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Management and Repositories
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../12-contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    Background
  </a>
  
    <nav class="md-nav" aria-label="Background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-gen3" class="md-nav__link">
    What is Gen3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-are-workflows" class="md-nav__link">
    What are workflows?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#workflow-execution-in-gen3" class="md-nav__link">
    Workflow execution in Gen3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-nextflow-what-is-aws-batch" class="md-nav__link">
    What is Nextflow? What is AWS Batch?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#steps-to-run-workflows-in-gen3" class="md-nav__link">
    Steps to run workflows in Gen3
  </a>
  
    <nav class="md-nav" aria-label="Steps to run workflows in Gen3">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-access-to-the-brh-workspace-and-set-up-a-funded-account" class="md-nav__link">
    Get access to the BRH workspace and set up a funded account
  </a>
  
    <nav class="md-nav" aria-label="Get access to the BRH workspace and set up a funded account">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-request-access-to-the-brh-workspace" class="md-nav__link">
    1) Request access to the BRH workspace
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-establish-a-workspace-account-with-a-persistent-pay-model-in-brh" class="md-nav__link">
    2) Establish a workspace account with a persistent pay model in BRH
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-launch-a-workspace-with-the-persistent-paymodel" class="md-nav__link">
    3) Launch a workspace with the persistent paymodel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-orientation-to-the-the-workspace" class="md-nav__link">
    Quick orientation to the the workspace
  </a>
  
    <nav class="md-nav" aria-label="Quick orientation to the the workspace">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-all-data-in-the-persistent-directory-pd" class="md-nav__link">
    Store all data in the persistent directory (/pd)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automated-shutdown-for-idle-workspaces" class="md-nav__link">
    Automated shutdown for idle workspaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu-vs-cpu-nextflow-workspace-images" class="md-nav__link">
    GPU vs CPU Nextflow workspace images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><p><a href="https://www.nextflow.io/"><img alt="Nextflow logo" src="../img/nextflow.svg" style="height:75px"></a></p>
<h1 id="getting-started-with-workflows-on-gen3"><strong>Getting started with workflows on Gen3</strong><a class="headerlink" href="#getting-started-with-workflows-on-gen3" title="Permanent link">¶</a></h1>
<p><a href="https://gen3.org/"><img alt="Gen3 logo" src="../img/Gen3-Logo-01-blue.png" style="height:75px"></a></p>
<p><em>Please note: Nextflow features are only available to users with a Direct Pay workspace account. <a href="../13-workspace_accounts/">See our documentation for persistent paymodels</a> to learn more about getting a Direct Pay workspace account.</em></p>
<h2 id="background"><strong>Background</strong><a class="headerlink" href="#background" title="Permanent link">¶</a></h2>
<h3 id="what-is-gen3"><em>What is Gen3?</em><a class="headerlink" href="#what-is-gen3" title="Permanent link">¶</a></h3>
<p>The Gen3 platform consists of open-source software services that make up data commons and data ecosystems (also called meshes or fabrics). A data commons is a platform that co-locates both data and compute resources so researchers can bring algorithms to the data. Data ecosystems or meshes are systems that researchers can use to search and query across multiple data commons in one location.</p>
<p>More information about Gen3 can be found <a href="https://gen3.org/">here</a>. A list of data platforms using the Gen3 technology can be found <a href="https://stats.gen3.org/">here</a>.</p>
<h3 id="what-are-workflows"><em>What are workflows?</em><a class="headerlink" href="#what-are-workflows" title="Permanent link">¶</a></h3>
<p>A workflow is a computational pipeline that consists of a series of steps to be executed. It could run using a software container that is a standalone, self-contained piece of software containing all the executables needed for the workflow.</p>
<p>Many workflow languages have been developed in recent years. Common examples include <a href="https://www.commonwl.org/">Common Workflow Language (CWL)</a>, <a href="https://openwdl.org/">Open Workflow Description Language (WDL)</a>, and <a href="https://www.nextflow.io/">Nextflow</a>. We will be using Nextflow for our exercises.</p>
<h3 id="workflow-execution-in-gen3"><em>Workflow execution in Gen3</em><a class="headerlink" href="#workflow-execution-in-gen3" title="Permanent link">¶</a></h3>
<p>Gen3 is based on kubernetes and is container-based. A container is a standalone, self-contained collection of software that contains specific software you may need for your application (e.g., Pydicom/DICOM, Numpy, SciPy). We are testing a new workflow execution system in Gen3 that researchers can use to run containers on the cloud for various applications in a secure and isolated manner. We developed an isolation process so that each user’s workflow is separate from each other, from the Gen3 core system, and from Gen3 data, except when approved and required for the specific task. The testing and development of workflows is currently underway in the <a href="https://brh.data-commons.org/">Biomedical Research Hub (BRH)</a>, one of the first data ecosystems (or meshes) built at CTDS.</p>
<h3 id="what-is-nextflow-what-is-aws-batch"><em>What is Nextflow? What is AWS Batch?</em><a class="headerlink" href="#what-is-nextflow-what-is-aws-batch" title="Permanent link">¶</a></h3>
<p>The workflow execution in Gen3 is powered using <a href="https://www.nextflow.io/">Nextflow</a>, a framework for writing data-driven computational pipelines using software containers. It is a very popular and convenient framework for specifying containers, inputs and outputs, and running jobs on the cloud. Researchers have used Nextflow for several years, and 2023 has continued to see a rapid gain in its popularity per a <a href="https://seqera.io/blog/the-state-of-the-workflow-2023-community-survey-results/">recent survey</a>. The scalability of workflows in Gen3 comes from <a href="https://docs.aws.amazon.com/batch/latest/userguide/what-is-batch.html">AWS Batch</a>, an AWS service capable of running compute jobs over large datasets on the Cloud.</p>
<h2 id="steps-to-run-workflows-in-gen3"><strong>Steps to run workflows in Gen3</strong><a class="headerlink" href="#steps-to-run-workflows-in-gen3" title="Permanent link">¶</a></h2>
<p>To run workflows in Gen3, you will need the following:</p>
<ul>
<li>Access to the BRH workspace (covered on this page)</li>
<li>A funded workspace account (covered on this page)</li>
<li>A Docker image uploaded to an ECR created for you (start with <a href="../nextflow-create-docker/">Create Dockerfile</a>)</li>
</ul>
<p><em>Depending on your specific workflows, you may also need additional tools, resources, or access.</em></p>
<h3 id="get-access-to-the-brh-workspace-and-set-up-a-funded-account"><strong>Get access to the BRH workspace and set up a funded account</strong><a class="headerlink" href="#get-access-to-the-brh-workspace-and-set-up-a-funded-account" title="Permanent link">¶</a></h3>
<h4 id="1-request-access-to-the-brh-workspace">1) Request access to the BRH workspace<a class="headerlink" href="#1-request-access-to-the-brh-workspace" title="Permanent link">¶</a></h4>
<p>The BRH exposes a <a href="https://brh.data-commons.org/workspace">computational workspace</a> that researchers can use to run simple Jupyter notebooks and submit workflows. To submit workflow jobs, you need access to the BRH workspace.</p>
<p>Follow <a href="https://uc-cdis.github.io/BRH-documentation/05-workspace_registration/#requesting-temporary-trial-access-to-brh-workspace">these instructions</a> to request trial access to the BRH workspace.  After you have submitted your request, please ping <code>nextflow-support</code> in Slack <em>(do not use @ or it will not work)</em>to alert us to look for your request and approve it. We will notify you by Slack when you are approved.  </p>
<h4 id="2-establish-a-workspace-account-with-a-persistent-pay-model-in-brh">2) Establish a workspace account with a persistent pay model in BRH<a class="headerlink" href="#2-establish-a-workspace-account-with-a-persistent-pay-model-in-brh" title="Permanent link">¶</a></h4>
<p>When you initially are granted workspace access in BRH, it is a trial access that is free for the user (paid by CTDS). However, the trial access paymodel does not permit access to the Nextflow image. To gain access to the Nextflow image needed for testing, you must request a workspace account with a persistent paymodel, so that the cost of compute jobs in your project can accrue to the right account. BRH currently supports several persistent pay models such as NIH STRIDES (payment through grant funds) and Direct Pay (credit card payment). If you're curious, <a href="https://uc-cdis.github.io/BRH-documentation/13-workspace_accounts/">see here</a> for more information about pay models.</p>
<p>For selected MIDRC user accounts who have been separately notified, we have already established a Direct-Pay-type* of workspace account for testing. When you receive workspace access, the Nextflow Support team will also add a Direct Pay account to your workspace.</p>
<p><em>* Note about this Direct-Pay-type of account: It is not an ACTUAL Direct Pay account, and it does not go through the normal Direct Pay account route, nor through OCC, at all. It is funded with MIDRC contract funds, but will be labeled Direct Pay in your workspace.</em></p>
<h3 id="3-launch-a-workspace-with-the-persistent-paymodel"><strong>3) Launch a workspace with the persistent paymodel</strong><a class="headerlink" href="#3-launch-a-workspace-with-the-persistent-paymodel" title="Permanent link">¶</a></h3>
<p>Once you have been notified that you have a workspace account provisioned with persistent paymodel funds, you can proceed.</p>
<ul>
<li>Log in to BRH and open the workspace page.</li>
<li>In the dropdown under "Account" in top left, select "Direct Pay" as your paymodel (#1 in screenshot below).</li>
<li>Once you select the Direct Pay workspace account, you should see a new option for workspace image: "(Beta) Nextflow with CPU instances"</li>
<li>Click the Launch button for this Nextflow workspace image (#2).</li>
<li>When you click the button, the workspace will begin to launch. This can take 5-10 minutes. You will know you successfully started the launch because you will see 3 animated dots rippling in the Launch button (see yellow highlight).<blockquote>
<p><em>If it takes longer than 10 minutes, try refreshing the screen and re-trying the launch. If it seems to stall out (longer than 10 min again), or if you get an error, reach out to CTDS staff through the Slack channel (but don't close the tab with the launch).</em></p>
</blockquote>
</li>
</ul>
<p><img alt="Screenshot of workspace launch screen" src="../img/launch-workspace.png"></p>
<h3 id="quick-orientation-to-the-the-workspace"><strong>Quick orientation to the the workspace</strong><a class="headerlink" href="#quick-orientation-to-the-the-workspace" title="Permanent link">¶</a></h3>
<p>Before using the workspace, we strongly encourage you to <a href="https://uc-cdis.github.io/BRH-documentation/09-workspace_page/#guideline-to-get-started-in-workspaces">review the BRH Workspace documentation</a>.</p>
<p>There are several key points we want you to be aware of:</p>
<h4 id="store-all-data-in-the-persistent-directory-pd">Store all data in the persistent directory (/pd)<a class="headerlink" href="#store-all-data-in-the-persistent-directory-pd" title="Permanent link">¶</a></h4>
<p>Store all files you want to keep after the workspace closes in the <code>/pd</code> directory; <strong>only files saved in the /pd directory will persist</strong>. Any personal files in the folder <code>data</code> will be lost.</p>
<p><img alt="Screenshot of /pd and data folders" src="../img/workspace_pd_folder_080422.png" style="height:400px"></p>
<h4 id="automated-shutdown-for-idle-workspaces">Automated shutdown for idle workspaces<a class="headerlink" href="#automated-shutdown-for-idle-workspaces" title="Permanent link">¶</a></h4>
<p>Workspaces will automatically be shut down (and all workflows terminated) after <strong>90 minutes of idle time</strong>.</p>
<h4 id="gpu-vs-cpu-nextflow-workspace-images">GPU vs CPU Nextflow workspace images<a class="headerlink" href="#gpu-vs-cpu-nextflow-workspace-images" title="Permanent link">¶</a></h4>
<p>As you can see <a href="#3-launch-a-workspace-with-the-persistent-paymodel">in the screenshot above</a>, there are 2 Nextflow workspace images: A CPU image and a GPU image. If your workflow requires GPU (e.g., deep learning or other AI/ML models), please use the GPU instance; otherwise, use CPU. You can <a href="../nextflow-create-docker/#how-to-choose-your-base-image">read more about CPU and GPU options in Gen3 Nextflow here</a>.  </p>
<p><a href="../nextflow-overview-containers/"><em>Continue to Overview of Containers in Gen3</em></a></p></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.indexes", "navigation.tracking"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>